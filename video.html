<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vidéos – Pierro</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="header small">
    <h1>Vidéos <span id="year-title"></span></h1>
    <a href="index.html" class="back">← Retour</a>
</header>

<main id="video-grid" class="video-grid"></main>

<script>
const year = new URLSearchParams(window.location.search).get("year");
document.getElementById("year-title").textContent = year;

async function loadVideos() {
    const res = await fetch("https://vz-2e3d1691-4b7.b-cdn.net/library/552202/videos", {
        headers: { "AccessKey": "7397ef3d-1c52-43d4-95754d8feaf5-32c4-45ba" }
    });

    const data = await res.json();
    const list = data.items.filter(v => v.meta && v.meta.year == year);

    const container = document.getElementById("video-grid");

    list.forEach(v => {
        container.innerHTML += `
            <div class="video-card" onclick="openPlayer('${v.guid}')">
                <img src="${v.thumbnailUrl}" class="thumb">
                <div class="v-title">${v.title}</div>
            </div>
        `;
    });
}

function openPlayer(id) {
    window.location.href = "https://iframe.mediadelivery.net/embed/552202/" + id;
}

loadVideos();
</script>

</body>
</html>
    
