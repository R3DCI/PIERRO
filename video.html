<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VidÃ©os â€“ Pierro</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<!-- LOADER -->
<div id="loader">
    <div class="spinner"></div>
</div>

<!-- MENU MOBILE -->
<nav class="mobile-menu" id="mobileMenu">
    <a href="index.html">ğŸ  Accueil</a>
    <a href="https://r3dci.github.io/PIERRO/">ğŸ—‚ï¸ AnnÃ©es</a>
    <a href="#">ğŸ“¸ Photos (Ã  venir)</a>
    <a href="#">â„¹ï¸ Ã€ propos</a>
</nav>

<!-- BOUTON MENU -->
<div class="menu-toggle" onclick="toggleMenu()">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
</div>

<header class="header small">
    <h1>VidÃ©os <span id="year-title"></span></h1>
    <a href="index.html" class="back">â† Retour</a>
</header>

<main id="video-grid" class="video-grid"></main>

<script>
function toggleMenu() {
    document.getElementById("mobileMenu").classList.toggle("open");
}

// LOADER
window.onload = () => {
    setTimeout(() => {
        document.getElementById("loader").style.opacity = 0;
        setTimeout(() => document.getElementById("loader").style.display = "none", 300);
    }, 600);
};

const year = new URLSearchParams(window.location.search).get("year");
document.getElementById("year-title").textContent = year;

async function loadVideos() {
    const res = await fetch("https://vz-2e3d1691-4b7.b-cdn.net/library/552202/videos", {
        headers: { "AccessKey": "7397ef3d-1c52-43d4-95754d8feaf5-32c4-45ba" }
    });

    const data = await res.json();
    const list = data.items.filter(v => v.meta && v.meta.year == year);

    const container = document.getElementById("video-grid");

    list.forEach((v, i) => {
        container.innerHTML += `
            <div class="video-card fade-in" style="animation-delay:${i * 0.1}s"
                onclick="openPlayer('${v.guid}')">
                <img src="${v.thumbnailUrl}" class="thumb">
                <div class="v-title">${v.title}</div>
            </div>
        `;
    });
}

function openPlayer(id) {
    window.location.href = "https://iframe.mediadelivery.net/embed/552202/" + id;
}

loadVideos();
</script>

</body>
</html>
