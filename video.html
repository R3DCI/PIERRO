<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vid√©o ‚Äì Pierro</title>
    <style>
        body {
            margin: 0;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        video {
            width: 100%;
            max-width: 900px;
            border-radius: 12px;
            box-shadow: 0 0 25px rgba(255,255,255,0.2);
        }
    </style>
</head>
<body>

    <!-- PLAYER COMPLET -->
    <video id="player" controls autoplay muted playsinline>
        <source id="videoSource" src="" type="video/mp4">
    </video>

    <!-- SCRIPT DE CHARGEMENT AUTOMATIQUE -->
    <script>

    /*************************************************************
     * ‚ö†Ô∏è  √Ä CHANGER PAR TOI :
     *************************************************************/
    const API_KEY     = 7397ef3d-1c52-43d4-95754d8feaf5-32c4-45ba ;  // üëâ ta cl√© API Stream
    const LIBRARY_ID  = 552202;                                     // üëâ ID de ta vid√©oth√®que
    const CDN_HOST    = vz-2e3d1691-4b7.b-cdn.net;                // üëâ ton hostname CDN
    const TARGET_YEAR = "2025";                                     // üëâ l‚Äôann√©e √† charger automatiquement
    /*************************************************************/


    // Fonction principale
    async function loadVideoByYear() {
        try {
            const response = await fetch(
                `https://video.bunnycdn.com/api/library/${LIBRARY_ID}/videos`,
                {
                    headers: {
                        "AccessKey": API_KEY,
                        "Content-Type": "application/json"
                    }
                }
            );

            const data = await response.json();

            if (!data.items) {
                console.error("‚ö†Ô∏è Aucune vid√©o trouv√©e dans la librairie.");
                return;
            }

            // Trouver la vid√©o dont la description = "year=XXXX"
            const video = data.items.find(v => v.description === `year=${TARGET_YEAR}`);

            if (!video) {
                console.error(`‚ö†Ô∏è Aucune vid√©o ne correspond √† year=${TARGET_YEAR}`);
                return;
            }

            // Construire l‚ÄôURL finale
            const finalURL = `https://${CDN_HOST}/${video.guid}/play`;

            // Mettre la vid√©o dans le player
            const src = document.getElementById("videoSource");
            src.src = finalURL;
            document.getElementById("player").load();

        } catch (err) {
            console.error("‚ùå Erreur lors du chargement :", err);
        }
    }

    // Charger d√®s que la page s‚Äôouvre
    loadVideoByYear();

    </script>

</body>
</html>
